[{"C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\index.js":"1","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\reportWebVitals.js":"2","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\App.js":"3","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\Footer.js":"4","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\Header.js":"5","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\PopupWithForm.js":"6","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\ImagePopup.js":"7","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\Main.js":"8","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\Card.js":"9","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\utils\\api.js":"10","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\EditProfilePopup.js":"11","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\EditAvatarPopup.js":"12","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\AddPlacePopup.js":"13","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\ProtectedRoute.js":"14","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\Login.js":"15","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\Register.js":"16","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\InfoTooltip.js":"17","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\utils\\apiAuth.js":"18","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\contexts\\CurrentUserContext.js":"19"},{"size":392,"mtime":1620853945475,"results":"20","hashOfConfig":"21"},{"size":362,"mtime":499162500000,"results":"22","hashOfConfig":"21"},{"size":7545,"mtime":1621000630529,"results":"23","hashOfConfig":"21"},{"size":206,"mtime":1611864316933,"results":"24","hashOfConfig":"21"},{"size":1135,"mtime":1620853767679,"results":"25","hashOfConfig":"21"},{"size":721,"mtime":1611844392591,"results":"26","hashOfConfig":"21"},{"size":522,"mtime":1610911398166,"results":"27","hashOfConfig":"21"},{"size":1304,"mtime":1620687363159,"results":"28","hashOfConfig":"21"},{"size":1558,"mtime":1611864209674,"results":"29","hashOfConfig":"21"},{"size":2049,"mtime":1620468746077,"results":"30","hashOfConfig":"21"},{"size":1855,"mtime":1611864145581,"results":"31","hashOfConfig":"21"},{"size":977,"mtime":1611864179188,"results":"32","hashOfConfig":"21"},{"size":1430,"mtime":1611864155259,"results":"33","hashOfConfig":"21"},{"size":336,"mtime":1620853791077,"results":"34","hashOfConfig":"21"},{"size":1328,"mtime":1620853783889,"results":"35","hashOfConfig":"21"},{"size":1578,"mtime":1620853797046,"results":"36","hashOfConfig":"21"},{"size":685,"mtime":1620853776779,"results":"37","hashOfConfig":"21"},{"size":1041,"mtime":1620844737743,"results":"38","hashOfConfig":"21"},{"size":86,"mtime":1620853248268,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},"1x63jbo",{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"42"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"79","usedDeprecatedRules":"42"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},"C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\index.js",[],["82","83"],"C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\reportWebVitals.js",[],"C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\App.js",["84","85","86"],"import React, { useEffect, useState } from \"react\";\nimport { Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport Header from \"../components/Header\";\nimport Main from \"../components/Main\";\nimport Footer from \"../components/Footer\";\nimport ImagePopup from \"../components/ImagePopup\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport { api } from \"../utils/api\";\nimport EditProfilePopup from \"../components/EditProfilePopup\";\nimport EditAvatarPopup from \"../components/EditAvatarPopup\";\nimport AddPlacePopup from \"../components/AddPlacePopup\";\nimport ProtectedRoute from \"../components/ProtectedRoute\";\nimport Login from \"../components/Login\";\nimport Register from \"../components/Register\";\nimport InfoTooltip from \"../components/InfoTooltip\";\nimport * as apiAuth from \"../utils/apiAuth\";\nimport succesStatus from \"../images/status__success.svg\";\nimport errorStatus from \"../images/status__error.svg\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] =\n    React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] =\n    React.useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({\n    name: \"\",\n    link: \"\",\n  });\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const history = useHistory();\n  const [statusInfo, setStatusInfo] = React.useState({\n    statusIcon: \"\",\n    statusTitle: \"\",\n  });\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [email, setEmail] = useState(\"\");\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n  function closeAllPopus() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsInfoTooltipOpen(false);\n    setSelectedCard({ name: \"\", link: \"\" });\n  }\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  function handleUpdateUser(userData) {\n    api\n      .editProfile(userData)\n      .then((userData) => {\n        setCurrentUser(userData);\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n      .finally(() => closeAllPopus());\n  }\n\n  React.useEffect(() => {\n    api\n      .getUserInfo()\n      .then((userData) => {\n        setCurrentUser(userData);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n  function handleUpdateAvatar(userData) {\n    api\n      .editAvatar(userData)\n      .then((userData) => {\n        setCurrentUser(userData);\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n      .finally(() => closeAllPopus());\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n\n    if (!isLiked) {\n      api\n        .putLike(card._id)\n        .then((newCard) => {          \n          setCards((cards) => cards.map((c) => (c._id === card._id ? newCard : c)) );\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    } else {\n      api\n        .deleteLike(card._id)\n        .then((newCard) => {          \n          setCards((cards) => cards.map((c) => (c._id === card._id ? newCard : c)));\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  }\n\n  useEffect(() => {\n    tokenCheck();\n  }, []);\n\n  useEffect(() => {\n    if (isLoggedIn) {\n      history.push(\"/main\");\n    }\n  }, [isLoggedIn]);\n\n  useEffect(() => {\n    if (!isLoggedIn) {\n      history.push(\"/sign-up\");\n    }\n  }, []);\n\n  React.useEffect(() => {\n    api\n      .getCards()\n      .then((cardsData) => {\n        setCards(cardsData);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n  function handleDeleteCard(card) {\n    api\n      .deleteCard(card._id)\n      .then((newCard) => {\n        setCards((cards) => cards.filter((c) => c._id === card._id ? !newCard : c)\n        );\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleAddPlaceSubmit(card) {\n    api\n      .editCard(card)\n      .then((newCard) => {\n        setCards([...cards, newCard]);\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n      .finally(() => closeAllPopus());\n  }\n\n  function handleRegister(data) {\n    return apiAuth\n      .register(data)\n      .then(() =>\n        setStatusInfo({\n          statusIcon: succesStatus,\n          statusTitle: \"Вы успешно зарегистрировались!\",\n        })\n      )\n      .then(() => {\n        history.push(\"/sign-in\");\n      })\n      .catch(() =>\n        setStatusInfo({\n          statusIcon: errorStatus,\n          statusTitle: \"Что-то пошло не так!Попробуйте ещё раз.\",\n        })\n      )\n      .finally(() => setIsInfoTooltipOpen(true));\n  }\n\n  function handleLogin(data) {\n    return apiAuth.authorize(data).then(({ token }) => {\n      setIsLoggedIn(true);\n      localStorage.setItem(\"jwt\", token);\n      setEmail(data.email);\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n  }\n\n  const tokenCheck = () => {\n    const jwt = localStorage.getItem(\"jwt\");\n    if (!jwt) {\n      return;\n    }\n\n    apiAuth.getContent(jwt).then(({ data }) => {\n      setEmail(data.email);\n      setIsLoggedIn(true);\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n  };\n\n  const handleSignOut = () => {\n    setIsLoggedIn(false);\n    localStorage.setItem(\"jwt\", \"\");\n    setEmail(\"\");\n  };\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"root\">\n        <div className=\"page\">\n          <Header\n            onSignOut={handleSignOut}\n            email={email}\n            isLoggedIn={isLoggedIn}\n          />\n          <InfoTooltip\n            onClose={closeAllPopus}\n            isOpen={isInfoTooltipOpen}\n            statusInfo={statusInfo}\n          />\n          <Switch>\n            <Route path=\"/sign-in\">\n              <Login onLogin={handleLogin} email={email} />\n            </Route>\n            <Route path=\"/sign-up\">\n              <Register onRegister={handleRegister} />\n            </Route>\n            <ProtectedRoute\n              path=\"/main\"\n              component={Main}\n              loggedIn={isLoggedIn}\n              cards={cards}\n              onEditAvatar={handleEditAvatarClick}\n              onEditProfile={handleEditProfileClick}\n              onAddPlace={handleAddPlaceClick}\n              onCardClick={handleCardClick}\n              onCardLike={handleCardLike}\n              onCardDelete={handleDeleteCard}\n            />\n          </Switch>\n\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopus}\n            onUpdateUser={handleUpdateUser}\n          />\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopus}\n            onAddPlace={handleAddPlaceSubmit}\n          />\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopus}\n            onUpdateAvatar={handleUpdateAvatar}\n          />\n          <ImagePopup card={selectedCard} onClose={closeAllPopus} />\n\n          {isLoggedIn && <Footer />}\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\Footer.js",[],"C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\Header.js",[],"C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\PopupWithForm.js",[],["87","88"],"C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\ImagePopup.js",[],"C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\Main.js",[],"C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\Card.js",[],"C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\utils\\api.js",[],"C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\EditProfilePopup.js",[],"C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\EditAvatarPopup.js",[],"C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\AddPlacePopup.js",[],"C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\ProtectedRoute.js",[],"C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\Login.js",[],"C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\Register.js",[],"C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\components\\InfoTooltip.js",[],"C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\utils\\apiAuth.js",["89"],"export const BASE_URL = 'https://auth.nomoreparties.co';\r\n\r\nconst checkResponse = (response) => {\r\n  return response.ok ? response.json() : Promise.reject();\r\n}\r\n\r\nconst headers = {  \r\n  'Content-Type': 'application/json',\r\n};\r\n\r\nexport const register = ({password, email}) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({password, email})\r\n  })\r\n    .then(res => checkResponse(res));\r\n};\r\n\r\nexport const authorize = ({ email, password }) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    method: 'POST',\r\n    body: JSON.stringify({ email, password }),\r\n  })\r\n    .then(res => checkResponse(res));\r\n};\r\n\r\nexport const getContent = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      'Authorization': `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then(res => checkResponse(res));\r\n};","C:\\Users\\Roman\\dev\\MestoReact\\mesto_react\\src\\contexts\\CurrentUserContext.js",[],{"ruleId":"90","replacedBy":"91"},{"ruleId":"92","replacedBy":"93"},{"ruleId":"94","severity":1,"message":"95","line":2,"column":25,"nodeType":"96","messageId":"97","endLine":2,"endColumn":33},{"ruleId":"98","severity":1,"message":"99","line":128,"column":6,"nodeType":"100","endLine":128,"endColumn":18,"suggestions":"101"},{"ruleId":"98","severity":1,"message":"102","line":134,"column":6,"nodeType":"100","endLine":134,"endColumn":8,"suggestions":"103"},{"ruleId":"90","replacedBy":"104"},{"ruleId":"92","replacedBy":"105"},{"ruleId":"94","severity":1,"message":"106","line":7,"column":7,"nodeType":"96","messageId":"97","endLine":7,"endColumn":14},"no-native-reassign",["107"],"no-negated-in-lhs",["108"],"no-unused-vars","'Redirect' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.","ArrayExpression",["109"],"React Hook useEffect has missing dependencies: 'history' and 'isLoggedIn'. Either include them or remove the dependency array.",["110"],["107"],["108"],"'headers' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"111","fix":"112"},{"desc":"111","fix":"113"},"Update the dependencies array to be: [history, isLoggedIn]",{"range":"114","text":"115"},{"range":"116","text":"115"},[3703,3715],"[history, isLoggedIn]",[3805,3807]]